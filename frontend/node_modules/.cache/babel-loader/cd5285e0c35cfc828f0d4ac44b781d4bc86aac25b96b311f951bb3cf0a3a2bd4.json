{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport { socket } from '../services/socket';\nconst initialState = {\n  currentStudent: null,\n  students: [],\n  loading: false,\n  error: null\n};\nexport const joinAsStudent = createAsyncThunk('student/joinAsStudent', async studentName => {\n  return new Promise((resolve, reject) => {\n    socket.emit('join_as_student', {\n      name: studentName\n    }, response => {\n      if (response.error) {\n        reject(response.error);\n      } else {\n        resolve(response);\n      }\n    });\n  });\n});\nconst studentSlice = createSlice({\n  name: 'student',\n  initialState,\n  reducers: {\n    setCurrentStudent: (state, action) => {\n      state.currentStudent = action.payload;\n    },\n    addStudent: (state, action) => {\n      const existingIndex = state.students.findIndex(s => s.id === action.payload.student_id);\n      if (existingIndex === -1) {\n        state.students.push({\n          id: action.payload.student_id,\n          name: action.payload.name\n        });\n      }\n    },\n    removeStudent: (state, action) => {\n      state.students = state.students.filter(s => s.id !== action.payload.student_id);\n    },\n    clearStudentError: state => {\n      state.error = null;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(joinAsStudent.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(joinAsStudent.fulfilled, (state, action) => {\n      state.loading = false;\n      state.currentStudent = {\n        id: action.payload.student_id,\n        name: action.payload.name\n      };\n    }).addCase(joinAsStudent.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.error.message;\n    });\n  }\n});\nexport const {\n  setCurrentStudent,\n  addStudent,\n  removeStudent,\n  clearStudentError\n} = studentSlice.actions;\nexport default studentSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","socket","initialState","currentStudent","students","loading","error","joinAsStudent","studentName","Promise","resolve","reject","emit","name","response","studentSlice","reducers","setCurrentStudent","state","action","payload","addStudent","existingIndex","findIndex","s","id","student_id","push","removeStudent","filter","clearStudentError","extraReducers","builder","addCase","pending","fulfilled","rejected","message","actions","reducer"],"sources":["C:/Users/Shivam Dave/Desktop/polling-system/frontend/src/store/studentSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport { socket } from '../services/socket';\r\n\r\nconst initialState = {\r\n  currentStudent: null,\r\n  students: [],\r\n  loading: false,\r\n  error: null,\r\n};\r\n\r\nexport const joinAsStudent = createAsyncThunk(\r\n  'student/joinAsStudent',\r\n  async (studentName) => {\r\n    return new Promise((resolve, reject) => {\r\n      socket.emit('join_as_student', { name: studentName }, (response) => {\r\n        if (response.error) {\r\n          reject(response.error);\r\n        } else {\r\n          resolve(response);\r\n        }\r\n      });\r\n    });\r\n  }\r\n);\r\n\r\nconst studentSlice = createSlice({\r\n  name: 'student',\r\n  initialState,\r\n  reducers: {\r\n    setCurrentStudent: (state, action) => {\r\n      state.currentStudent = action.payload;\r\n    },\r\n    addStudent: (state, action) => {\r\n      const existingIndex = state.students.findIndex(\r\n        (s) => s.id === action.payload.student_id\r\n      );\r\n      if (existingIndex === -1) {\r\n        state.students.push({\r\n          id: action.payload.student_id,\r\n          name: action.payload.name,\r\n        });\r\n      }\r\n    },\r\n    removeStudent: (state, action) => {\r\n      state.students = state.students.filter(\r\n        (s) => s.id !== action.payload.student_id\r\n      );\r\n    },\r\n    clearStudentError: (state) => {\r\n      state.error = null;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(joinAsStudent.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(joinAsStudent.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.currentStudent = {\r\n          id: action.payload.student_id,\r\n          name: action.payload.name,\r\n        };\r\n      })\r\n      .addCase(joinAsStudent.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.error.message;\r\n      });\r\n  },\r\n});\r\n\r\nexport const {\r\n  setCurrentStudent,\r\n  addStudent,\r\n  removeStudent,\r\n  clearStudentError,\r\n} = studentSlice.actions;\r\n\r\nexport default studentSlice.reducer; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}